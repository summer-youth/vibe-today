# Google OAuth 2.0 μ¤λ¥ ν•΄κ²° κ°€μ΄λ“ π”§

"Access blocked: Authorization Error" μ¤λ¥λ¥Ό ν•΄κ²°ν•λ” λ°©λ²•μ…λ‹λ‹¤.

## π” λ¬Έμ  μ›μΈ

Google OAuth 2.0 μ •μ±…μ„ μ¤€μν•μ§€ μ•μ•„ λ°μƒν•λ” μ¤λ¥μ…λ‹λ‹¤. μ£Όλ΅ λ‹¤μ μ΄μ λ΅ λ°μƒν•©λ‹λ‹¤:
1. OAuth λ™μ ν™”λ©΄μ΄ μ λ€λ΅ μ„¤μ •λμ§€ μ•μ
2. λ¦¬λ””λ ‰μ… URIκ°€ Google Cloud Consoleμ— λ“±λ΅λμ§€ μ•μ
3. ν…μ¤νΈ μ‚¬μ©μκ°€ μ¶”κ°€λμ§€ μ•μ
4. μ•±μ΄ ν”„λ΅λ•μ… λ¨λ“λ΅ μ„¤μ •λμ–΄ μμ (κ°λ° μ¤‘μΈ κ²½μ°)

---

## β… ν•΄κ²° λ°©λ²•

### 1λ‹¨κ³„: λ¦¬λ””λ ‰μ… URI ν™•μΈ

Expoλ¥Ό μ‚¬μ©ν•λ” κ²½μ°, λ¦¬λ””λ ‰μ… URIλ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

**Expo Go (κ°λ° λ¨λ“):**
```
https://auth.expo.io/@your-expo-username/vibe-today
```

**λλ” Expo ν”„λ΅μ‹ μ‚¬μ© μ‹:**
```
exp://127.0.0.1:8081
```

μ‹¤μ  λ¦¬λ””λ ‰μ… URIλ¥Ό ν™•μΈν•λ ¤λ©΄ μ•±μ„ μ‹¤ν–‰ν•κ³  μ½μ†”μ—μ„ ν™•μΈν•κ±°λ‚, μ•„λ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•μ„Έμ”.

### 2λ‹¨κ³„: Google Cloud Console μ„¤μ •

1. **[Google Cloud Console](https://console.cloud.google.com/)** μ ‘μ†
2. Firebase ν”„λ΅μ νΈμ™€ μ—°κ²°λ ν”„λ΅μ νΈ μ„ νƒ
3. **API λ° μ„λΉ„μ¤** > **μ‚¬μ©μ μΈμ¦ μ •λ³΄** μ΄λ™
4. **OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID** λ©λ΅μ—μ„ μ›Ή ν΄λΌμ΄μ–ΈνΈ ID ν΄λ¦­

### 3λ‹¨κ³„: μΉμΈλ λ¦¬λ””λ ‰μ… URI μ¶”κ°€

**μ›Ή ν΄λΌμ΄μ–ΈνΈ ID νΈμ§‘ ν™”λ©΄μ—μ„:**

1. **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ…μΌλ΅ μ΄λ™
2. λ‹¤μ URIλ“¤μ„ μ¶”κ°€:

```
https://auth.expo.io/@your-expo-username/vibe-today
exp://127.0.0.1:8081
http://localhost:8081
http://localhost:19000
http://localhost:19001
http://localhost:19002
```

**μ°Έκ³ :** `@your-expo-username`μ€ μ‹¤μ  Expo μ‚¬μ©μλ…μΌλ΅ λ³€κ²½ν•μ„Έμ”.

### 4λ‹¨κ³„: OAuth λ™μ ν™”λ©΄ μ„¤μ •

1. **API λ° μ„λΉ„μ¤** > **OAuth λ™μ ν™”λ©΄** μ΄λ™
2. **μ‚¬μ©μ μ ν•** μ„ νƒ:
   - **μ™Έλ¶€** (μΌλ° μ‚¬μ©μμ—κ² κ³µκ°) - κ°λ° μ¤‘μ—λ” μ΄ μµμ… μ‚¬μ©
   - **λ‚΄λ¶€** (μ΅°μ§ λ‚΄λ¶€ μ‚¬μ©μλ§) - Google Workspace μ‚¬μ© μ‹

3. **μ•± μ •λ³΄** μ…λ ¥:
   - **μ•± μ΄λ¦„**: λ°”μ΄λΈν¬λ°μ΄ (λλ” μ›ν•λ” μ΄λ¦„)
   - **μ‚¬μ©μ μ§€μ› μ΄λ©”μΌ**: λ³ΈμΈ μ΄λ©”μΌ
   - **μ•± λ΅κ³ **: (μ„ νƒμ‚¬ν•­)
   - **μ•± λ„λ©”μΈ**: (μ„ νƒμ‚¬ν•­)

4. **μ•± λ„λ©”μΈ** (μ„ νƒμ‚¬ν•­):
   - κ°λ° μ¤‘μ΄λ©΄ λΉ„μ›λ‘κ±°λ‚ `localhost` μ…λ ¥

5. **κ°λ°μ μ—°λ½μ² μ •λ³΄**:
   - λ³ΈμΈ μ΄λ©”μΌ μ…λ ¥

6. **λ²”μ„ (Scopes)** μ¶”κ°€:
   - `openid`
   - `profile`
   - `email`

7. **ν…μ¤νΈ μ‚¬μ©μ** μ¶”κ°€:
   - **ν…μ¤νΈ μ‚¬μ©μ** μ„Ήμ…μΌλ΅ μ΄λ™
   - **+ ADD USERS** ν΄λ¦­
   - λ΅κ·ΈμΈν•  Google κ³„μ • μ΄λ©”μΌ μ¶”κ°€
   - μ—¬λ¬ κ³„μ •μ„ ν…μ¤νΈν•λ ¤λ©΄ λ¨λ‘ μ¶”κ°€

8. **μ €μ¥ ν›„ κ³„μ†** ν΄λ¦­

### 5λ‹¨κ³„: μ•± κ²μ‹ μƒνƒ ν™•μΈ

**μ¤‘μ”:** κ°λ° μ¤‘μΈ μ•±μ€ **ν…μ¤νΈ λ¨λ“**λ΅ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

1. **OAuth λ™μ ν™”λ©΄**μ—μ„ **κ²μ‹ μƒνƒ** ν™•μΈ
2. **ν…μ¤νΈ μ¤‘** μƒνƒλ΅ μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈ
3. ν”„λ΅λ•μ…μΌλ΅ κ²μ‹ν•λ ¤λ©΄ Google κ²€μ¦μ΄ ν•„μ”ν•©λ‹λ‹¤ (κ°λ° μ¤‘μ—λ” λ¶ν•„μ”)

### 6λ‹¨κ³„: Firebase Authentication μ„¤μ • ν™•μΈ

1. **[Firebase Console](https://console.firebase.google.com/)** μ ‘μ†
2. ν”„λ΅μ νΈ μ„ νƒ
3. **Authentication** > **Sign-in method** μ΄λ™
4. **Google** ν΄λ¦­
5. **μ›Ή SDK κµ¬μ„±** μ„Ήμ…μ—μ„:
   - **μ›Ή ν΄λΌμ΄μ–ΈνΈ ID**κ°€ Google Cloud Consoleμ μ›Ή ν΄λΌμ΄μ–ΈνΈ IDμ™€ μΌμΉν•λ”μ§€ ν™•μΈ
   - `.env` νμΌμ `EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID`μ™€ μΌμΉν•λ”μ§€ ν™•μΈ

---

## π”§ λ¦¬λ””λ ‰μ… URI ν™•μΈ μ¤ν¬λ¦½νΈ

μ‹¤μ  μ‚¬μ©λλ” λ¦¬λ””λ ‰μ… URIλ¥Ό ν™•μΈν•λ ¤λ©΄:

```bash
# ν”„λ΅μ νΈ λ£¨νΈμ—μ„ μ‹¤ν–‰
node -e "const { makeRedirectUri } = require('expo-auth-session'); console.log('Redirect URI:', makeRedirectUri({ useProxy: true }));"
```

λλ” μ•±μ„ μ‹¤ν–‰ν•κ³  μ½μ†”μ—μ„ ν™•μΈν•μ„Έμ”.

---

## π“ μ²΄ν¬λ¦¬μ¤νΈ

ν•΄κ²° ν›„ λ‹¤μ μ‚¬ν•­λ“¤μ„ ν™•μΈν•μ„Έμ”:

- [ ] Google Cloud Consoleμ—μ„ μ›Ή ν΄λΌμ΄μ–ΈνΈ IDμ **μΉμΈλ λ¦¬λ””λ ‰μ… URI**μ— Expo URI μ¶”κ°€λ¨
- [ ] OAuth λ™μ ν™”λ©΄μ—μ„ **ν…μ¤νΈ μ‚¬μ©μ**λ΅ λ³ΈμΈ μ΄λ©”μΌ μ¶”κ°€λ¨
- [ ] OAuth λ™μ ν™”λ©΄μ **κ²μ‹ μƒνƒ**κ°€ **ν…μ¤νΈ μ¤‘**μΌλ΅ μ„¤μ •λ¨
- [ ] Firebase Authenticationμ **μ›Ή ν΄λΌμ΄μ–ΈνΈ ID**κ°€ Google Cloud Consoleκ³Ό μΌμΉν•¨
- [ ] `.env` νμΌμ `EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID`κ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λ¨

---

## π¨ μ—¬μ „ν μ¤λ¥κ°€ λ°μƒν•λ” κ²½μ°

### 1. μΊμ‹ ν΄λ¦¬μ–΄

```bash
# Expo μΊμ‹ ν΄λ¦¬μ–΄
npm start -- --clear

# λλ”
npx expo start --clear
```

### 2. λΈλΌμ°μ € μΊμ‹ ν΄λ¦¬μ–΄

- Chrome/Edge: `Ctrl+Shift+Delete` (Windows) λλ” `Cmd+Shift+Delete` (Mac)
- Safari: `Cmd+Option+E`

### 3. Google κ³„μ • ν™•μΈ

- ν…μ¤νΈ μ‚¬μ©μ λ©λ΅μ— μ¶”κ°€λ κ³„μ •μΌλ΅ λ΅κ·ΈμΈν•λ”μ§€ ν™•μΈ
- λ‹¤λ¥Έ Google κ³„μ •μΌλ΅ μ‹λ„ν•΄λ³΄κΈ°

### 4. λ¦¬λ””λ ‰μ… URI μ¬ν™•μΈ

μ•±μ„ μ‹¤ν–‰ν•κ³  μ‹¤μ λ΅ μ‚¬μ©λλ” λ¦¬λ””λ ‰μ… URIλ¥Ό μ½μ†”μ—μ„ ν™•μΈν• ν›„, Google Cloud Consoleμ— μ •ν™•ν μ¶”κ°€ν–λ”μ§€ ν™•μΈν•μ„Έμ”.

---

## π“ μ°Έκ³  μλ£

- [Google OAuth 2.0 μ •μ±…](https://developers.google.com/identity/protocols/oauth2/policies)
- [Expo AuthSession λ¬Έμ„](https://docs.expo.dev/guides/authentication/#google)
- [Firebase Authentication κ°€μ΄λ“](https://firebase.google.com/docs/auth)

---

## π’΅ ν

- κ°λ° μ¤‘μ—λ” ν•­μƒ **ν…μ¤νΈ λ¨λ“**λ΅ μ„¤μ •ν•μ„Έμ”
- ν”„λ΅λ•μ… λ°°ν¬ μ „μ— Google κ²€μ¦μ„ λ°›μ•„μ•Ό ν•©λ‹λ‹¤
- λ¦¬λ””λ ‰μ… URIλ” μ •ν™•ν μΌμΉν•΄μ•Ό ν•©λ‹λ‹¤ (λ€μ†λ¬Έμ, μ¬λμ‹ λ“±)

